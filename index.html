<!DOCTYPE html> 
<html> 
<head> 
    <title> Movie Questionnaire</title> 
    
    <!--Placeholder for Segment Snippet --> 
<script>
  !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="AAWYrZHlv40kGqLQw77S7sR1DIeequGI";;analytics.SNIPPET_VERSION="5.2.0";
  analytics.load("AAWYrZHlv40kGqLQw77S7sR1DIeequGI");
  analytics.page();
  }}();
</script>
</head> 
<body>

    <script>
            //just adding a constructor to the String object
            // will be using it to create a userID from email
            String.prototype.hashCode = function() {
                var hash = 0;
                if (this.length == 0) {
                    return hash;
                }
                for (var i = 0; i < this.length; i++) {
                    var char = this.charCodeAt(i);
                    hash = ((hash<<5)-hash)+char;
                    hash = hash & hash; // Convert to 32bit integer
                }
                return hash;
            }
    </script>
    
    
<h1>What is your favorite movie that is available streaming?</h1> 
<p>I am surveying friends so we can select a movie to watch together online.</p>  
<form name="movies" method="get" enctype="application/x-www-form-urlencoded" action="/html/codes/html_form_handler.cfm" onsubmit="identify(event)">
     Favorite movie available on streaming platforms:
    <input name="movie" required="" size="81" type="text"/> 
    <br><br><br> 
    Which platform does it stream on and do you subscribe to that platform? 
    <br><br> 
    <textarea cols="81" name="details" required="" rows="10"></textarea> 
    <br><br> 
    Name: <input name="fullname" required="" size="75" type="text" /> 
    <br><br> 
    Email: <input name="email" required="" size="75" type="email" /> 
    <br><br>
    Birthdate: <input name="birthdate" required="" size="75" type="text" /> 
    <br><br> 

        <!--
    Segment USER_ID: <input name="USER_ID" required="" size="75" type="text" value="dv1000000"/> 
    <br><br>
    --> 
    
<input name="submit" type="submit" value="submit"/>
</form> 

    <!--Placeholder for identify and track script -->
    <script type="text/javascript">
        function identify(e){
        e.preventDefault();
        var form = e.target;
        var email = form["email"].value;
        var fullname = form["fullname"].value;
        var movie = form["movie"].value;
        var details = form["details"].value;
            var birthdate = form["birthdate"].value;
    //in this case we grab the userId from the form, very unlikely IRL
    //    var USER_ID = form["USER_ID"].value
        
        

          
    //    analytics.identify(USER_ID, {
     //       email: email,
     //       name: fullname,
     //       birthdate: birthdate
     //   });
        
        //or alternatively, more in the realm of possible IRL:
        //
        //analytics.identify(email.hashCode, {
        //    email: email,
        //    name: fullname
        //});
          
        //analytics.track(event, [properties], [options], [callback]);
        analytics.track(
                'Submitted',
                {
                  "movie": movie,
                  "details": details
                  // { context: { ip: "0.0.0.0" }}, //with this we would override the value for ip in context
                });
        //analytics.group;
        //analytics.group("0e8c78ea9d97a7b8185e8632", {
        //    name: "Hasbro Pulse",
        //    industry: "Toys",
         //   employees: 5000,
        //    plan: "enterprise",
         //   "total billed": 1500
});
        }
    </script>
    
    <div id="target-container"></div>
    
    <br/><br/>
    
    
    <!-- button to reset a.js -->
    <button type="button" onclick="analytics.reset();">analytics.reset();</button>

    
</body> 
</html>
